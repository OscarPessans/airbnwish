function empty(t){t.length=0}function slice$1(t,e,n){return Array.prototype.slice.call(t,e,n)}function apply$1(t){return t.bind.apply(t,[null].concat(slice$1(arguments,1)))}function raf(t){return requestAnimationFrame(t)}function typeOf$1(t,e){return typeof e===t}var t=Array.isArray;apply$1(typeOf$1,"function");apply$1(typeOf$1,"string");apply$1(typeOf$1,"undefined");function toArray$1(e){return t(e)?e:[e]}function forEach$1(t,e){toArray$1(t).forEach(e)}var e=Object.keys;function forOwn$1(t,n,o){if(t){var r=e(t);r=o?r.reverse():r;for(var a=0;a<r.length;a++){var u=r[a];if("__proto__"!==u&&false===n(t[u],u))break}}return t}function assign$1(t){slice$1(arguments,1).forEach((function(e){forOwn$1(e,(function(n,o){t[o]=e[o]}))}));return t}var n=Math.min;function EventBinder(){var t=[];function bind(e,n,o,r){forEachEvent(e,n,(function(e,n,a){var u="addEventListener"in e;var i=u?e.removeEventListener.bind(e,n,o,r):e.removeListener.bind(e,o);u?e.addEventListener(n,o,r):e.addListener(o);t.push([e,n,a,o,i])}))}function unbind(e,n,o){forEachEvent(e,n,(function(e,n,r){t=t.filter((function(t){if(t[0]===e&&t[1]===n&&t[2]===r&&(!o||t[3]===o)){t[4]();return false}return true}))}))}function dispatch(t,e,n){var o;var r=true;if("function"===typeof CustomEvent)o=new CustomEvent(e,{bubbles:r,detail:n});else{o=document.createEvent("CustomEvent");o.initCustomEvent(e,r,false,n)}t.dispatchEvent(o);return o}function forEachEvent(t,e,n){forEach$1(t,(function(t){t&&forEach$1(e,(function(e){e.split(" ").forEach((function(e){var o=e.split(".");n(t,o[0],o[1])}))}))}))}function destroy(){t.forEach((function(t){t[4]()}));empty(t)}return{bind:bind,unbind:unbind,dispatch:dispatch,destroy:destroy}}var o="move";var r="moved";var a="updated";var u="drag";var i="dragged";var s="scroll";var c="scrolled";var l="destroy";function EventInterface(e){var n=e?e.event.bus:document.createDocumentFragment();var o=EventBinder();function on(e,r){o.bind(n,toArray$1(e).join(" "),(function(e){r.apply(r,t(e.detail)?e.detail:[])}))}function emit(t){o.dispatch(n,t,slice$1(arguments,1))}e&&e.event.on(l,o.destroy);return assign$1(o,{bus:n,on:on,off:apply$1(o.unbind,n),emit:emit})}function RequestInterval(t,e,o,r){var a=Date.now;var u;var i=0;var s;var c=true;var l=0;function update(){if(!c){i=t?n((a()-u)/t,1):1;o&&o(i);if(i>=1){e();u=a();if(r&&++l>=r)return pause()}raf(update)}}function start(e){!e&&cancel();u=a()-(e?i*t:0);c=false;raf(update)}function pause(){c=true}function rewind(){u=a();i=0;o&&o(i)}function cancel(){s&&cancelAnimationFrame(s);i=0;s=0;c=true}function set(e){t=e}function isPaused(){return c}return{start:start,rewind:rewind,pause:pause,cancel:cancel,set:set,isPaused:isPaused}}function Throttle(t,e){var n;function throttled(){if(!n){n=RequestInterval(e||0,(function(){t();n=null}),null,1);n.start()}}return throttled}var f="is-active";var d="slide";var p="fade";function slice(t,e,n){return Array.prototype.slice.call(t,e,n)}function apply(t){return t.bind(null,...slice(arguments,1))}function typeOf(t,e){return typeof e===t}function isObject(t){return!isNull(t)&&typeOf("object",t)}const v=Array.isArray;apply(typeOf,"function");apply(typeOf,"string");const y=apply(typeOf,"undefined");function isNull(t){return null===t}function toArray(t){return v(t)?t:[t]}function forEach(t,e){toArray(t).forEach(e)}function toggleClass(t,e,n){t&&forEach(e,(e=>{e&&t.classList[n?"add":"remove"](e)}))}const m=Object.keys;function forOwn(t,e,n){if(t){let o=m(t);o=n?o.reverse():o;for(let n=0;n<o.length;n++){const r=o[n];if("__proto__"!==r&&false===e(t[r],r))break}}return t}function assign(t){slice(arguments,1).forEach((e=>{forOwn(e,((n,o)=>{t[o]=e[o]}))}));return t}function removeAttribute(t,e){forEach(t,(t=>{forEach(e,(e=>{t&&t.removeAttribute(e)}))}))}function setAttribute(t,e,n){isObject(e)?forOwn(e,((e,n)=>{setAttribute(t,n,e)})):forEach(t,(t=>{isNull(n)||""===n?removeAttribute(t,e):t.setAttribute(e,String(n))}))}const{min:b,max:g,floor:E,ceil:h,abs:O}=Math;function clamp(t,e,n){const o=b(e,n);const r=g(e,n);return b(g(o,t),r)}const A={speed:1,autoStart:true,pauseOnHover:true,pauseOnFocus:true};const $={startScroll:"Start auto scroll",pauseScroll:"Pause auto scroll"};function AutoScroll(t,e,n){const{on:l,off:v,bind:m,unbind:b}=EventInterface(t);const{translate:g,getPosition:E,toIndex:h,getLimit:O}=e.Move;const{setIndex:S,getIndex:w}=e.Controller;const{orient:P}=e.Direction;const{toggle:L}=e.Elements;const{Live:I}=e;const{root:j}=t;const C=Throttle(e.Arrows.update,500);let _={};let k;let x;let T;let B;let D;let F;function setup(){const{autoScroll:t}=n;_=assign({},A,isObject(t)?t:{})}function mount(){if(!t.is(p)&&!k&&false!==n.autoScroll){k=RequestInterval(0,move);listen();autoStart()}}function destroy(){if(k){k.cancel();k=null;F=void 0;v([o,u,s,r,c]);b(j,"mouseenter mouseleave focusin focusout");b(L,"click")}}function listen(){_.pauseOnHover&&m(j,"mouseenter mouseleave",(t=>{T="mouseenter"===t.type;autoToggle()}));_.pauseOnFocus&&m(j,"focusin focusout",(t=>{B="focusin"===t.type;autoToggle()}));_.useToggleButton&&m(L,"click",(()=>{x?play():pause()}));l(a,update);l([o,u,s],(()=>{D=true;pause(false)}));l([r,i,c],(()=>{D=false;autoToggle()}))}function update(){const{autoScroll:t}=n;if(false!==t){_=assign({},_,isObject(t)?t:{});mount()}else destroy();k&&!y(F)&&g(F)}function autoStart(){_.autoStart&&("complete"===document.readyState?play():m(window,"load",play))}function play(){if(isPaused()){k.start(true);I.disable(true);B=T=x=false;updateButton()}}function pause(t=true){if(!x){x=t;updateButton();if(!isPaused()){k.pause();I.disable(false)}}}function autoToggle(){x||(T||B||D?pause(false):play())}function move(){const n=E();const o=computeDestination(n);if(n!==o){g(o);updateIndex(F=E())}else{pause(false);_.rewind&&t.go(_.speed>0?0:e.Controller.getEnd())}C()}function computeDestination(e){const n=_.speed||1;e+=P(n);t.is(d)&&(e=clamp(e,O(false),O(true)));return e}function updateIndex(o){const{length:r}=t;const a=(h(o)+r)%r;if(a!==w()){S(a);e.Slides.update();e.Pagination.update();"nearby"===n.lazyLoad&&e.LazyLoad.check()}}function updateButton(){if(L){const t=x?"startScroll":"pauseScroll";toggleClass(L,f,!x);setAttribute(L,"aria-label",n.i18n[t]||$[t])}}function isPaused(){return!k||k.isPaused()}return{setup:setup,mount:mount,destroy:destroy,play:play,pause:pause,isPaused:isPaused}}export{AutoScroll};

